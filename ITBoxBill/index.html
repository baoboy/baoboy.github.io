<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Gang of Four 账单</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn1.lncld.net/static/js/av-mini-0.6.4.js"></script>
    <script src="https://cdn1.lncld.net/static/js/av-mini-0.6.4.js"></script>
    <script src="js/umd/alert.js"></script>
    <script src="js/jquery-2.2.1.min.js"></script>

    <script type="text/javascript">
        AV.initialize('vIu1iyyYoU9BrHC5pMfeNUIU-gzGzoHsz', 'r1iIXaA2Svp8DtiBtRm6pyVe');

        function submitBill() {
            var username = document.getElementById("selectUsername").value;
            var description = document.getElementById("inputDescription").value;
            var amount = parseInt(document.getElementById("inputAmount").value);
            var date = new Date(document.getElementById("inputDate").value);
            var remark = document.getElementById("inputRemark").value;

            var PaymentRecords = AV.Object.extend('PaymentRecords');
            var record = new PaymentRecords();
            record.save({
                username: username,
                description: description,
                amount: amount,
                date: date,
                remark: remark
            }, {
                success: function(object) {
                    alert('提交成功');
                    $(".form-group").find("input[type=text], textarea").val(null);
                }
            });
        }
    </script>
</head>
<body>
<div class="container">

    <form onsubmit="submitBill()" action="#">
        <h2 class="form-control-label">Gang of Four 记账</h2>
        <br/>

        <fieldset class="form-group">
            <label for="selectUsername" class="sr-only">付款人</label>
            <select id="selectUsername" class="c-select" required>
                <option selected>选择付款人</option>
                <option value="鲍永章">鲍永章</option>
                <option value="杨洋">杨洋</option>
                <option value="尤泽红">尤泽红</option>
                <option value="赵海军">赵海军</option>
            </select>
        </fieldset>

        <fieldset class="form-group">
            <label for="inputDescription" class="sr-only">内容描述</label>
            <input type="text" id="inputDescription" class="form-control" placeholder="内容描述" required autofocus>
        </fieldset>

        <fieldset class="form-group">
            <label for="inputAmount" class="sr-only">总金额</label>
            <input type="number" id="inputAmount" class="form-control" placeholder="总金额" required>
        </fieldset>

        <fieldset class="form-group">
            <label for="inputDate" class="sr-only">日期</label>
            <input type="date" id="inputDate" class="form-control"  required>
        </fieldset>

        <fieldset class="form-group">
            <label for="inputRemark" class="sr-only">备注</label>
            <input type="text" id="inputRemark" class="form-control" placeholder="备注">
        </fieldset>

        <button class="btn btn-lg btn-primary btn-block" type="submit">提交</button>
    </form>

</div>
</body>
</html>